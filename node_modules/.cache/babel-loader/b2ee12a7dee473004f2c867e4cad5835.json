{"ast":null,"code":"import _classCallCheck from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/dudu/Desktop/CS5224-PIA/src/Analyse.js\";\nimport React, { Component } from 'react';\nimport { Label, Button, Container, Form, FormGroup, Input } from \"reactstrap\";\nimport { Progress, Row, Col } from 'reactstrap';\nimport MainMenu from \"./components/MainMenu\";\nimport Results from \"./components/Results\";\n\nvar Analyse =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Analyse, _Component);\n\n  function Analyse(props) {\n    var _this;\n\n    _classCallCheck(this, Analyse);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Analyse).call(this, props));\n    _this.state = {\n      folder_path: \"\",\n      ps_content: \"\",\n      upload_progress: 0,\n      fetching_data: false,\n      response_data_recieved: false,\n      response_data: {}\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAnalyse = _this.handleAnalyse.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.reset = _this.reset.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Analyse, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var _this2 = this;\n\n      this.myspan.textContent = event.target.files.length + \" files selected\";\n      var file = event.target.files[0];\n\n      if (!file) {\n        return;\n      }\n\n      var reader = new FileReader(); // Asynchronous function\n\n      reader.onloadend = function () {\n        var content = reader.result;\n        console.log(content);\n\n        _this2.setState({\n          ps_content: content\n        });\n      };\n    }\n  }, {\n    key: \"handleAnalyse\",\n    value: function handleAnalyse(event) {\n      event.preventDefault();\n      this.setState({\n        fetching_data: true\n      }); // Upload formdata to api\n\n      var url = 'http://personality-insights.shahabqamar.com/api/';\n      var form = new FormData(event.target); // console.log(form)\n\n      var file = event.target.files[0];\n      fetch(url, {\n        method: 'POST',\n        body: form\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        console.log(\"Response data received!\");\n        console.log(data);\n\n        if (data.error) {\n          this.setState({\n            fetching_data: false,\n            response_data_recieved: false\n          }, function () {\n            alert(data.error + \". Please try again.\");\n          });\n        } else {\n          this.setState({\n            fetching_data: false,\n            response_data: data,\n            response_data_recieved: true\n          });\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"reset\",\n    value: function reset(event) {\n      window.location.reload();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(MainMenu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container_choose-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, !this.state.response_data_recieved && React.createElement(Container, {\n        className: \"choose-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Please select one Personal Statements (PS) or Cover Letter (CL) to be uploaded and ranked\"), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onChange: this.handleChange,\n        type: \"file\",\n        accept: \".txt\",\n        id: \"file-1\",\n        className: \"inputfile inputfile-1\",\n        \"data-multiple-caption\": \"{count} files selected\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(Label, {\n        for: \"file-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"20\",\n        height: \"17\",\n        viewBox: \"0 0 20 17\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        d: \"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        ref: function ref(span) {\n          return _this3.myspan = span;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Choose files\\u2026\")))), React.createElement(Progress, {\n        value: this.state.upload_progress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(Button, {\n        color: \"primary\",\n        size: \"lg\",\n        block: true,\n        className: \"analyse-button\",\n        onClick: this.handleAnalyse,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Analyse Now\")), this.state.response_data_recieved && React.createElement(Results, {\n        resultData: this.state.response_data,\n        rawText: this.state.ps_content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Analyse;\n}(Component);\n\nexport default Analyse;","map":{"version":3,"sources":["/Users/dudu/Desktop/CS5224-PIA/src/Analyse.js"],"names":["React","Component","Label","Button","Container","Form","FormGroup","Input","Progress","Row","Col","MainMenu","Results","Analyse","props","state","folder_path","ps_content","upload_progress","fetching_data","response_data_recieved","response_data","handleChange","bind","handleAnalyse","reset","event","myspan","textContent","target","files","length","file","reader","FileReader","onloadend","content","result","console","log","setState","preventDefault","url","form","FormData","fetch","method","body","then","response","json","data","error","alert","window","location","reload","handleSubmit","span"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Label, Button, Container, Form, FormGroup, Input} from \"reactstrap\";\r\nimport { Progress, Row, Col } from 'reactstrap';\r\nimport MainMenu from \"./components/MainMenu\";\r\nimport Results from \"./components/Results\";\r\n\r\nclass Analyse extends Component {\r\n\tconstructor(props) {\r\n\tsuper(props);\r\n\tthis.state = {\r\n\t\tfolder_path: \"\",\r\n\t\tps_content: \"\",\r\n\t\tupload_progress: 0,\r\n\t\tfetching_data: false,\r\n\t\tresponse_data_recieved: false,\r\n\t\tresponse_data: {}\r\n\t};\r\n\tthis.handleChange = this.handleChange.bind(this);\r\n\tthis.handleAnalyse = this.handleAnalyse.bind(this);\r\n\tthis.reset = this.reset.bind(this)\r\n\t}\r\n\r\n \r\n\thandleChange(event) {\r\n\t\tthis.myspan.textContent = event.target.files.length + \" files selected\"\r\n\r\n\r\n\t\tconst file = event.target.files[0];\r\n\r\n        if (!file) {\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        // Asynchronous function\r\n        reader.onloadend = () => {\r\n        \tconst content = reader.result;\r\n        \tconsole.log(content)\r\n        \tthis.setState({ps_content: content});\r\n\t\t}\r\n\t}\r\n\r\n\thandleAnalyse(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tthis.setState({\r\n\t\t\tfetching_data: true,\r\n\t\t});\r\n\t\t// Upload formdata to api\r\n\t\tconst url = 'http://personality-insights.shahabqamar.com/api/';\r\n\t\tconst form = new FormData(event.target);\r\n\t\t    // console.log(form)\r\n\r\n\t    const file = event.target.files[0];\r\n\r\n\t\tfetch(url, {\r\n\t\t    method: 'POST',\r\n\t\t    body: form\r\n\t\t})\r\n\t\t    .then(function(response) {\r\n\t\t\t    return response.json();\r\n\t\t\t    })\r\n\t\t    .then(\r\n\t\t\t\tfunction(data) {\r\n\t\t\t\t\tconsole.log(\"Response data received!\")\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t  \tthis.setState(\r\n\t\t\t\t\t\t  {\r\n\t\t\t\t\t\t\tfetching_data: false,\r\n\t\t\t\t\t\t\tresponse_data_recieved: false\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t  function() {\r\n\t\t\t\t\t\t\talert(data.error + \". Please try again.\");\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t  fetching_data: false,\r\n\t\t\t\t\t\t  response_data: data,\r\n\t\t\t\t\t\t  response_data_recieved: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this)\r\n\t\t\t);\r\n\t}\r\n\r\n\t\r\n\treset(event){\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t  <div>\r\n\t\t  \t<MainMenu />\r\n\t\t  \t<div className=\"container_choose-file\">\r\n\t\t  \t\t{!this.state.response_data_recieved && (\r\n\t\t  \t\t\t<Container className=\"choose-file\">\r\n\t\t\t\t\t\t<Form onSubmit={this.handleSubmit}>\r\n\t\t\t\t    \t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<h1 >Please select one Personal Statements (PS) or Cover Letter (CL) to be uploaded and ranked</h1>\r\n\t\t\t\t\t\t\t\t<Container>\r\n\t\t\t\t\t\t\t\t\t<Input onChange={this.handleChange} type=\"file\" accept=\".txt\" id=\"file-1\" className=\"inputfile inputfile-1\" data-multiple-caption=\"{count} files selected\" />\r\n\t\t\t\t\t\t\t\t\t<Label for=\"file-1\">\r\n\t\t\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"17\" viewBox=\"0 0 20 17\">\r\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z\"/>\r\n\t\t\t\t\t\t\t\t\t\t</svg> \r\n\t\t\t\t\t\t\t\t\t\t<span ref={(span) => this.myspan = span}>Choose files&hellip;</span>\r\n\t\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t    \t\t</FormGroup>\t\t\r\n\t\t\t\t\t\t    <Progress value={this.state.upload_progress} />\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t<Button color=\"primary\" size=\"lg\" block className=\"analyse-button\" onClick={this.handleAnalyse}>Analyse Now</Button>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{this.state.response_data_recieved && (\r\n\t\t\t\t\t<Results\r\n\t\t\t\t\t\tresultData={this.state.response_data}\r\n\t\t\t\t\t\trawText={this.state.ps_content}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t    );\r\n    }\r\n }\r\n\r\nexport default Analyse;"]},"metadata":{},"sourceType":"module"}