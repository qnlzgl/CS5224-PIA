{"ast":null,"code":"import _classCallCheck from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/dudu/Desktop/CS5224-PIA/src/Rank.js\";\nimport React, { Component } from 'react';\nimport { Label, FormText, Button, Container, Form, FormGroup, Input } from \"reactstrap\";\n\nvar Rank =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Rank, _Component);\n\n  function Rank(props) {\n    var _this;\n\n    _classCallCheck(this, Rank);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Rank).call(this, props));\n\n    _this.handleChangeFile = function (e) {\n      var file = e.target.files[0];\n\n      if (!file) {\n        return;\n      }\n\n      var src,\n          preview,\n          type = file.type;\n\n      if (/^image\\/\\S+$/.test(type)) {\n        src = URL.createObjectURL(file);\n        preview = React.createElement(\"img\", {\n          src: src,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        });\n      } // 匹配类型为video/开头的字符串\n      else if (/^video\\/\\S+$/.test(type)) {\n          src = URL.createObjectURL(file);\n          preview = React.createElement(\"video\", {\n            src: src,\n            autoPlay: true,\n            loop: true,\n            controls: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          });\n        } // 匹配类型为text/开头的字符串\n        else if (/^text\\/\\S+$/.test(type)) {\n            var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n            var reader = new FileReader();\n\n            reader.onloadend = function () {\n              var content = reader.result;\n              console.log(content);\n            };\n\n            reader.readAsText(file);\n            return;\n          }\n\n      _this.setState({\n        path: file.name,\n        data: file,\n        preview: preview\n      });\n    };\n\n    _this.state = {\n      folder_path: \"\",\n      fetchingData: false,\n      responseDataRecieved: false,\n      responseData: {}\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.tryAgain = _this.tryAgain.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Rank, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      this.setState({\n        fetchingData: true,\n        loadingmsg: \"Fetching Personality Insights\"\n      });\n      var formData = new FormData(event.target);\n      fetch(process.env.REACT_APP_WATSON_API_ENDPOINT, {\n        method: \"POST\",\n        body: formData\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.error) {\n          this.setState({\n            fetchingData: false,\n            responseDataRecieved: false\n          }, function () {\n            alert(data.error + \". Please try again.\");\n          });\n        } else {\n          this.setState({\n            fetchingData: false,\n            responseData: data,\n            responseDataRecieved: true\n          });\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var file = event.target.files[0];\n\n      if (!file) {\n        return;\n      }\n\n      var reader = new FileReader(); // Asynchronous function\n\n      reader.onloadend = function () {\n        var content = reader.result; // console.log(content)\n        // Upload formdata to api\n\n        var url = 'http://personality-insights.shahabqamar.com/api/';\n        var form = new FormData();\n        form.append('raw-text-content', content); // console.log(form)\n\n        fetch(url, {\n          method: 'POST',\n          body: form\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          // add more content here\n          console.log(data);\n        });\n      };\n\n      reader.readAsText(file);\n    }\n  }, {\n    key: \"focusInput\",\n    value: function focusInput(component) {}\n  }, {\n    key: \"tryAgain\",\n    value: function tryAgain() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"folder-path\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Please choose folder which contains all the Personal Statements\"), React.createElement(Input, {\n        type: \"file\",\n        accept: \".txt\",\n        id: \"folder-path\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Analyse\")));\n    }\n  }]);\n\n  return Rank;\n}(Component);\n\nexport default Rank;","map":{"version":3,"sources":["/Users/dudu/Desktop/CS5224-PIA/src/Rank.js"],"names":["React","Component","Label","FormText","Button","Container","Form","FormGroup","Input","Rank","props","handleChangeFile","e","file","target","files","src","preview","type","test","URL","createObjectURL","self","reader","FileReader","onloadend","content","result","console","log","readAsText","setState","path","name","data","state","folder_path","fetchingData","responseDataRecieved","responseData","handleChange","bind","handleSubmit","tryAgain","event","preventDefault","loadingmsg","formData","FormData","fetch","process","env","REACT_APP_WATSON_API_ENDPOINT","method","body","then","response","json","error","alert","url","form","append","component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Label, FormText, Button, Container, Form, FormGroup, Input} from \"reactstrap\";\n\n\nclass Rank extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      folder_path: \"\",\n      fetchingData: false,\n      responseDataRecieved: false,\n      responseData: {}\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.tryAgain = this.tryAgain.bind(this);\n  }\n\n\thandleSubmit(event) {\n\n\t    event.preventDefault();\n\n\t    this.setState({\n\t      fetchingData: true,\n\t      loadingmsg: \"Fetching Personality Insights\"\n\t    });\n\n\t    const formData = new FormData(event.target);\n\n\t    fetch(process.env.REACT_APP_WATSON_API_ENDPOINT, {\n\t      method: \"POST\",\n\t      body: formData\n\t    })\n\t      .then(function(response) {\n\t        return response.json();\n\t      })\n\t      .then(\n\t        function(data) {\n\t          if (data.error) {\n\t            this.setState(\n\t              {\n\t                fetchingData: false,\n\t                responseDataRecieved: false\n\t              },\n\t              function() {\n\t                alert(data.error + \". Please try again.\");\n\t              }\n\t            );\n\t          } else {\n\t            this.setState({\n\t              fetchingData: false,\n\t              responseData: data,\n\t              responseDataRecieved: true\n\t            });\n\t          }\n\t        }.bind(this)\n\t      );\n\t}\n\n\thandleChange(event) {\n        const file = event.target.files[0];\n        if (!file) {\n            return;\n        }\n\n        const reader = new FileReader();\n        // Asynchronous function\n        reader.onloadend = () => {\n        \tconst content = reader.result;\n        \t// console.log(content)\n\n\t\t\t// Upload formdata to api\n\t        const url = 'http://personality-insights.shahabqamar.com/api/';\n\t        const form = new FormData();\n\t        form.append('raw-text-content', content);\n\t        // console.log(form)\n\n\t        fetch(url, {\n\t            method: 'POST',\n\t            body: form\n\t        })\n\t        .then(function(response) {\n\t\t        return response.json();\n\t\t        })\n\t        .then(\n\t\t        function(data) {\n\t        \t  // add more content here\n\t\t          console.log(data)\n\t\t        }\n      \t\t);\n\n        }\n        reader.readAsText(file);\n\t}\n\n\tfocusInput(component) {}\n\ttryAgain() {}\n    handleChangeFile = (e) => {\n        const file = e.target.files[0];\n        if (!file) {\n            return;\n        }\n\n        let src,preview,type=file.type;\n\n        if (/^image\\/\\S+$/.test(type)) {\n            src = URL.createObjectURL(file)\n            preview = <img src={src} alt='' />\n        }\n        // 匹配类型为video/开头的字符串\n        else if (/^video\\/\\S+$/.test(type)) {\n            src = URL.createObjectURL(file)\n            preview = <video src={src} autoPlay loop controls />\n        }\n        // 匹配类型为text/开头的字符串\n        else if (/^text\\/\\S+$/.test(type)) {\n            const self = this;\n            const reader = new FileReader();\n            reader.onloadend = () => {\n            \tconst content = reader.result;\n            \tconsole.log(content)\n            }\n            reader.readAsText(file);\n            return;\n        } \n\n        this.setState({ path: file.name, data: file, preview: preview })\n    }\n\n\trender() {\n\t\treturn (\n\t\t  <div>\n\t\t\t<Form onSubmit={this.handleSubmit}>\n\t\t\t    <FormGroup>\n\t\t\t      <Label for=\"folder-path\">Please choose folder which contains all the Personal Statements</Label>\n\t\t\t      <Input type=\"file\" accept=\".txt\" id=\"folder-path\" onChange={this.handleChange}/> \n\t\t\t    </FormGroup>\n\n\t\t\t    <Button\n\t\t\t      type=\"submit\"\n\t\t\t      size=\"lg\">\n\t\t\t      Analyse\n\t\t\t    </Button>\n\t\t\t</Form>\n\t\t  </div>\n\t\t);\n\t}\n}\n\nexport default Rank;\n"]},"metadata":{},"sourceType":"module"}