{"ast":null,"code":"import _classCallCheck from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/dudu/Desktop/CS5224-PIA/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/dudu/Desktop/CS5224-PIA/src/Rank.js\";\nimport React, { Component } from 'react';\nimport { Label, FormText, Button, Container, Form, FormGroup, Input } from \"reactstrap\";\nimport TextFileReader from 'react-text-file-reader';\n\nvar Rank =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Rank, _Component);\n\n  function Rank(props) {\n    var _this;\n\n    _classCallCheck(this, Rank);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Rank).call(this, props));\n\n    _this.handleFile = function (e) {\n      var content = fileReader.result;\n      console.log('file content', content); // You can set content in state and show it in render.\n    };\n\n    _this.handleChangeFile = function (file) {\n      fileData = new FileReader();\n      fileData.onloadend = handleFile;\n      fileReader.readAsText(file);\n    };\n\n    _this.state = {\n      folder_path: \"\",\n      fetchingData: false,\n      responseDataRecieved: false,\n      responseData: {}\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.tryAgain = _this.tryAgain.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Rank, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      this.setState({\n        fetchingData: true,\n        loadingmsg: \"Fetching Personality Insights\"\n      });\n      var formData = new FormData(event.target);\n      fetch(process.env.REACT_APP_WATSON_API_ENDPOINT, {\n        method: \"POST\",\n        body: formData\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.error) {\n          this.setState({\n            fetchingData: false,\n            responseDataRecieved: false\n          }, function () {\n            alert(data.error + \". Please try again.\");\n          });\n        } else {\n          this.setState({\n            fetchingData: false,\n            responseData: data,\n            responseDataRecieved: true\n          });\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        folder_path: event.target.value\n      });\n    }\n  }, {\n    key: \"focusInput\",\n    value: function focusInput(component) {}\n  }, {\n    key: \"tryAgain\",\n    value: function tryAgain() {}\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      var reader = new FileReader();\n      reader.readAsText(file); //注：onload是异步函数，此处需独立处理\n\n      reader.onload = function (e) {\n        preview = React.createElement(\"textarea\", {\n          value: this.result,\n          readOnly: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n        self.setState({\n          path: file.name,\n          data: file,\n          preview: preview\n        });\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"file\",\n        accept: \".txt\",\n        onChange: function onChange(e) {\n          return handleChangeFile(e.target.files[0]);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \" \"), React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"folder-path\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Text\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"text\",\n        id: \"folder-path\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Analyse\")));\n    }\n  }]);\n\n  return Rank;\n}(Component);\n\nexport default Rank;","map":{"version":3,"sources":["/Users/dudu/Desktop/CS5224-PIA/src/Rank.js"],"names":["React","Component","Label","FormText","Button","Container","Form","FormGroup","Input","TextFileReader","Rank","props","handleFile","e","content","fileReader","result","console","log","handleChangeFile","file","fileData","FileReader","onloadend","readAsText","state","folder_path","fetchingData","responseDataRecieved","responseData","handleChange","bind","handleSubmit","tryAgain","event","preventDefault","setState","loadingmsg","formData","FormData","target","fetch","process","env","REACT_APP_WATSON_API_ENDPOINT","method","body","then","response","json","data","error","alert","value","component","reader","onload","preview","self","path","name","files"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Label, FormText, Button, Container, Form, FormGroup, Input} from \"reactstrap\";\nimport TextFileReader from 'react-text-file-reader'\n\n\nclass Rank extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      folder_path: \"\",\n      fetchingData: false,\n      responseDataRecieved: false,\n      responseData: {}\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.tryAgain = this.tryAgain.bind(this);\n  }\n\n\thandleSubmit(event) {\n\n\t    event.preventDefault();\n\n\t    this.setState({\n\t      fetchingData: true,\n\t      loadingmsg: \"Fetching Personality Insights\"\n\t    });\n\n\t    const formData = new FormData(event.target);\n\n\t    fetch(process.env.REACT_APP_WATSON_API_ENDPOINT, {\n\t      method: \"POST\",\n\t      body: formData\n\t    })\n\t      .then(function(response) {\n\t        return response.json();\n\t      })\n\t      .then(\n\t        function(data) {\n\t          if (data.error) {\n\t            this.setState(\n\t              {\n\t                fetchingData: false,\n\t                responseDataRecieved: false\n\t              },\n\t              function() {\n\t                alert(data.error + \". Please try again.\");\n\t              }\n\t            );\n\t          } else {\n\t            this.setState({\n\t              fetchingData: false,\n\t              responseData: data,\n\t              responseDataRecieved: true\n\t            });\n\t          }\n\t        }.bind(this)\n\t      );\n\t}\n\n\thandleChange(event) {\n\t    this.setState({\n\t      folder_path: event.target.value\n\t    });\n\t}\n\n\tfocusInput(component) {}\n\ttryAgain() {}\n  \thandleClick() {\n            const reader = new FileReader();\n            reader.readAsText(file);\n            //注：onload是异步函数，此处需独立处理\n            reader.onload = function (e) {\n                preview = <textarea value={this.result} readOnly></textarea>\n                self.setState({ path: file.name, data: file, preview: preview })\n            }\n  \t}\n\n  \thandleFile = (e) => {\n\t  const content = fileReader.result;\n\t  console.log('file content',  content)\n\t  // You can set content in state and show it in render.\n\t}\n\n\thandleChangeFile = (file) => {\n\t  fileData = new FileReader();\n\t  fileData.onloadend = handleFile;\n\t  fileReader.readAsText(file);\n\t}\n\n\n  render() {\n    return (\n      <div>\n        <Input type=\"file\" accept=\".txt\" onChange={e => handleChangeFile(e.target.files[0])}> </Input>\n\n      <Form onSubmit={this.handleSubmit}>\n        <FormGroup>\n          <Label for=\"folder-path\">Text</Label>\n          <Input type=\"text\" name=\"text\" id=\"folder-path\" onChange={this.handleChange}/>\n        </FormGroup>\n\n        <Button\n          type=\"submit\"\n          size=\"lg\">\n          Analyse\n        </Button>\n      </Form>\n\n      </div>\n    );\n  }\n}\n\nexport default Rank;\n"]},"metadata":{},"sourceType":"module"}